# "Сервис микроблогов" (корпоративная сеть )
![img_3.png](readme%2Fimg_3.png)
## Описание поведения
это корпоративная сеть использующая api_key для авторизации. 
### Функциональные требования:
1. Пользователь может добавить новый твит.
2. Пользователь может удалить свой твит.
3. Пользователь может зафоловить другого пользователя.
4. Пользователь может отписаться от другого пользователя.
5. Пользователь может отмечать твит как понравившийся.
6. Пользователь может убрать отметку «Нравится».
7. Твит может содержать картинку.
## Технологии:
Данный проект написан на языке программирования Python, с использованием следующих технологий:
* Flask
* Swagger
* SqlAlchemy (Postgres db)
* Nginx+uwsgi
* Docker
## Подготовка к запуску:
## I. Создание .env:
1) Необходимо в корневой папке приложения создать файл .env.
2) Ниже представлены переменные окружения которые нужно указать в файле .env, 
при этом значение переменных можно изменить под свой проект. 
```dotenv
CONTAINER_NAME="sql_postgres"
POSTGRES_USER="admin"
POSTGRES_PASSWORD="admin"
POSTGRES_DB="main_db"
DATABASE_URL="postgresql+psycopg2://admin:admin@sql_postgres:5432/main_db"
```
###### (!WARNING! DATABASE_URL требует соответствия с другими переменными окружения postgresql+psycopg2://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${CONTAINER_NAME}:5432/${POSTGRES_DB}, 
## II. Cоздание образа:
Для создания образа приложения требуется находиться в корневой папке приложения и выполнить команду:
 ```bash
docker compose build
```
## Запуск приложения:
Для запуска приложения требуется находиться в корневой папке приложения и выполнить команду:
 ```bash
docker compose up -d
```
## Остановка приложения:
Остановка осуществляет следующей комбинацией клавиш в терминале запущенного приложения:
```bash
CTRL + C
```
# Создание пользователя:
##### Важно! Для первого запуска рекомендуется создать пользователя с api_key = 'test'.
### 1 способ: 
Для создания пользователя необходимо добавить базу данных в Pycharm, как это указано на изображении № 1
изображение № 1
![img.png](readme%2Fimg.png)
### 2 способ:
1. Выполнить команду в терминале 
```bash
docker compose ps
```
2. Найти postgres image (см. изображение № 2)
изображение № 2
![img_1.png](readme%2Fimg_1.png)
3. Необходимо вставить номер контейнера вместо  CONTAINER ID и выполнить команду ниже, чтобы зайти в контейнер 
```bash
docker exec -ti "CONTAINER ID"  sh    
```
4. Необходимо подключиться к базе данных командой ниже
```bash
psql main_db -U admin 
```
5. И выполнить создание пользователя:
Пример:
```bash
INSERT INTO users (id, name, another_info, api_key) VALUES (1, 'nikita', null, 'test')
```
# Использование приложения
Для использования приложения необходимо посетить [стартовую страницу](http://localhost/) 
# Документация по API
[Swagger documentation](http://localhost/api/docs/) (http://localhost/api/docs/).
